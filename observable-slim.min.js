var ObservableSlim=function(){var s=[],d=[],x=[],P=null,p=function(e,i,r,n){var v=r||null,f=n||"",g=[],h=function(e,r,n){var t=null;return t=e instanceof Array?""!==f?f:r:""!==f?f+"."+r:r,!0===n&&(t="/"+t.replace(/\./g,"/")),t},b=function(n){if(!0!==v.paused)if(!0===i)setTimeout(function(){if(n===g.length){var e=g.slice(0);g=[];for(var r=0;r<v.observers.length;r++)v.observers[r](e)}},10);else{var e=g.slice(0);g=[];for(var r=0;r<v.observers.length;r++)v.observers[r](e)}},y=new Proxy(e,{get:function(t,e){if("__getTarget"===e)return t;if("__isProxy"===e)return!0;if("__getParent"===e)return function(e){if(void 0===e)e=1;var r,n=h(t,"__getParent").split(".");return n.splice(-(e+1),e+1),r=v.parentProxy,n.join(".").split(".").reduce(function(e,r){return e?e[r]:void 0},r||self)};var r=t[e],n=null!==r,o=t.hasOwnProperty(e);if("function"==typeof r&&n)return"valueOf"===r.name?r():function(){return function(e,r,n){var t,o=!0;if(P===y&&(o=!1,P=null),g.push({type:"function call",target:e,function:r,functionArgs:n,currentPath:h(e,r),jsonPointer:h(e,r,!0)}),!0===o){for(var a=0,l=d.length;a<l&&e!==d[a];a++);for(var s=x[a],u=s.length;u--;)if(s[u].proxy!==y){P=s[u].proxy;var i=s[u].proxy;i[r].apply(i,n)}v.changesPaused||(t=e[r].apply(e,n))}return b(g.length),t}(t,r.name,arguments)};if(!(r instanceof Object&&n&&o))return r;!0===r.__isProxy&&(r=r.__getTarget);for(var a=-1,l=v.targets,s=0,u=l.length;s<u;s++)if(r===l[s]){a=s;break}return-1<a?v.proxies[a]:p(r,i,v,""!==f?f+"."+e:e)},deleteProperty:function(e,r){var n=!0;P===y&&(n=!1,P=null);var t=Object.assign({},e);if(g.push({type:"delete",target:e,property:r,newValue:null,previousValue:t[r],currentPath:h(e,r),jsonPointer:h(e,r,!0),proxy:y}),!0===n){for(var o=0,a=d.length;o<a&&e!==d[o];o++);for(var l=x[o],s=l.length;s--;)l[s].proxy!==y&&(P=l[s].proxy,delete l[s].proxy[r]);v.changesPaused||delete e[r]}return b(g.length),!0},set:function(t,e,r,n){var o=!0;P===y&&(o=!1,P=null);var a=t[e];if(a!==r||!1===o){var l=!0,s=typeof a,u="update";if("undefined"===s&&(u="add"),g.push({type:u,target:t,property:e,newValue:r,previousValue:n[e],currentPath:h(t,e),jsonPointer:h(t,e,!0),proxy:y}),!0===o){for(var i=0,f=d.length;i<f&&t!==d[i];i++);if(l=i<f){var p=x[i],c=0;for(f=p.length;c<f;c++)p[c].proxy!==y&&(P=p[c].proxy,p[c].proxy[e]=r);setTimeout(function(){if("object"===s&&null!==a){for(var e=Object.keys(t),r=0,n=e.length;r<n;r++)if(t[e[r]]===a)return;!function e(r){for(var n=Object.keys(r),t=0,o=n.length;t<o;t++){var a=r[n[t]];a instanceof Object&&null!==a&&e(a)}var l=-1;for(t=0,o=d.length;t<o;t++)if(r===d[t]){l=t;break}if(-1<l){for(var s=x[l],u=s.length;u--;)if(v===s[u].observable){s.splice(u,1);break}0==s.length&&(x.splice(l,1),d.splice(l,1))}}(a)}},1e4)}v.changesPaused||(t[e]=r)}l&&b(g.length)}return!0}});null===v?(v={parentTarget:e,domDelay:i,parentProxy:y,observers:[],targets:[e],proxies:[y],paused:!1,path:f,changesPaused:!1},s.push(v)):(v.targets.push(e),v.proxies.push(y));for(var t={target:e,proxy:y,observable:v},o=-1,a=0,l=d.length;a<l;a++)if(e===d[a]){o=a;break}return-1<o?x[o].push(t):(d.push(e),x.push([t]),o=d.length-1),y};return{create:function(e,r,n){if(!0===e.__isProxy)e=e.__getTarget;var t=p(e,r);return"function"==typeof n&&this.observe(t,n),function e(r){for(var n=r.__getTarget,t=Object.keys(n),o=0,a=t.length;o<a;o++){var l=t[o];n[l]instanceof Object&&null!==n[l]&&e(r[l])}}(t),t},observe:function(e,r){for(var n=s.length;n--;)if(s[n].parentProxy===e){s[n].observers.push(r);break}},pause:function(e){for(var r=s.length,n=!1;r--;)if(s[r].parentProxy===e){n=s[r].paused=!0;break}if(0==n)throw new Error("ObseravableSlim could not pause observable -- matching proxy not found.")},resume:function(e){for(var r=s.length,n=!1;r--;)if(s[r].parentProxy===e){n=!(s[r].paused=!1);break}if(0==n)throw new Error("ObseravableSlim could not resume observable -- matching proxy not found.")},pauseChanges:function(e){for(var r=s.length,n=!1;r--;)if(s[r].parentProxy===e){n=s[r].changesPaused=!0;break}if(0==n)throw new Error("ObseravableSlim could not pause changes on observable -- matching proxy not found.")},resumeChanges:function(e){for(var r=s.length,n=!1;r--;)if(s[r].parentProxy===e){n=!(s[r].changesPaused=!1);break}if(0==n)throw new Error("ObseravableSlim could not resume changes on observable -- matching proxy not found.")},remove:function(e){for(var r=null,n=!1,t=s.length;t--;)if(s[t].parentProxy===e){r=s[t],n=!0;break}for(var o=x.length;o--;)for(var a=x[o].length;a--;)x[o][a].observable===r&&(x[o].splice(a,1),0===x[o].length&&(x.splice(o,1),d.splice(o,1)));!0===n&&s.splice(t,1)}}}();try{module.exports=ObservableSlim}catch(e){}